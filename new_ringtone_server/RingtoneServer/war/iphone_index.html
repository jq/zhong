<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>FreeRingtone</title>
        <style type="text/css" media="screen">@import "/jqtouch/jqtouch.css";</style>
        
        <style type="text/css" media="screen">@import "themes/apple/theme.css";</style>
        <style type="text/css" media="screen">@import "themes/apple/addition.css";</style>
        
        
        <script src="/jqtouch/jquery-1.4.4.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="/jqtouch/jqtouch.js" type="application/x-javascript" charset="utf-8"></script>
        <script src="/js/iscroll.js" type="application/x-javascript" charset="utf-8"></script>
        <script src="/js/iphone_search.js" type="application/x-javascript" charset="utf-8"></script>
        <script type="text/javascript" charset="utf-8">
            var jQT = new $.jQTouch({
                icon: 'ringtone_icon.png',
                debug: false,
            });
            
            // iscroll, 部分代码需要加到你动态生成的result的代码结尾处，用于计算实际的内容高度。
            function setHeight($item) {
              var $wrapper = $item.find('.s-scrollwrapper');
              if ($wrapper.length > 0) {
                var headerH = 0;
                var footerH = 0;
                var tabbarH = 0;
                var wrapperH = 320;
  
                var $header = $item.find('.toolbar');
                headerH = $header.length > 0 ? ($header.outerHeight() > 0 ? $header.outerHeight() : 0) : 0;
  
                var $footer = $item.find('.navibar'); // page footer
                var $tabbar = $('#tabbar'); // global tabbar
                if ($footer.length > 0) {
                  footerH = $footer.outerHeight();
                } else if ($tabbar.length > 0) {
                  tabbarH = $tabbar.outerHeight(); 
                }

                // workaround limitation on outerHeight (ie, returns zero until animation ended)
                if (headerH > 0 || footerH > 0 || tabbarH > 0) {
                  wrapperH = window.innerHeight - headerH - footerH - tabbarH;
                  $wrapper.height(wrapperH);
                }

                // refresh scroll
                var scroll = $item.data('iscroll_object');
                if (scroll !== undefined && scroll !== null) {
                  scroll.refresh();
                }
              }
            }

            function setCurrentHeight() {
              setHeight($('.current'));
            }

            function loaded() {
              $('#jqt').children().each(function () {
                var $this = $(this);
                var $wrapper = $this.find('.s-scrollwrapper');
                var $pane = $wrapper.find('.s-scrollpane'); 
                if ($wrapper.length > 0) {
                  var scroll = new iScroll($pane[0].id, {desktopCompatibility: true});
                  $this.data('iscroll_object', scroll); 

                  // workaround limitation on outerHeight (ie, returns zero until animation ended)
                  // set a default for most common case to avoid resize being seen
                  wrapperH = window.innerHeight - 88;
                  $wrapper.height(wrapperH);

                  scroll.refresh();

                  $this.bind('pageAnimationEnd', function(event, info) {
                    if (info.direction == 'in') {
                      setHeight($(this));
                    }
                  });
                }
              });
            }
            
            // 非全屏模式时，不修改touchmove事件监听器
            document.addEventListener('touchmove', function(e){ e.preventDefault(); }, true);
            
            
            $(window).resize(function() {
              $('#jqt').children().each(function () {
                setHeight($(this));
              });
            });
            $(document).ready(function(){
              loaded();
              $(window).resize();

              setTimeout(function() {
                $(window).resize();
              }, 1500);
            });
        
        </script>
        
        <style type="text/css" media="screen">
            #about {
                padding: 100px 10px 40px;
                text-shadow: rgba(255, 255, 255, 0.3) 0px -1px 0;
                font-size: 13px;
                text-align: center;
                background: #161618;
            }
            #about p {
                margin-bottom: 8px;
            }
            #about a {
                color: #fff;
                font-weight: bold;
                text-decoration: none;
            }
        </style>
        <style type="text/css" media="screen">
        </style>
    </head>
    
    <body>
    <div id="jqt">
		<div id="home" class="current">
    		<div class="toolbar">
        		<h1>Free Ringtone</h1>
    		</div>
    		<div class="searchbox">
      			<form id="search" action="" method="">
        			<fieldset><input id="search-text" placeholder="search" type="text" />
        			<input id="submit" type="hidden" /></fieldset>
      			</form>
    		</div>
    		<ul class="rounded">
    		    <li class="textbox"><span class="header">Featured</span></li> 
        		<li class="arrow"><a class="slide" href="#categories">All Categories</a></li>
        		<li class="arrow"><a class="slide" href="#top_download">Top Donwload</a></li>
        		<li class="arrow"><a class="slide" href="#top_download">Bla Bla Bla</a></li>
    		</ul>
		</div>

		<div id="search_result">
		    <div class="toolbar">
        		<h1>Search Result</h1>
        		<a href="#" class="back">Back</a>
    		</div>
    		<div class="loader" style="display:none;"></div>
        <div id="target-wrapper-results" class="s-scrollwrapper"><div id="target-pane-results" class="s-scrollpane">
			  <ul class="rounded" id="results">
			  </ul>
			  </div></div>
		</div>
		
		<div id="categories">
		    <div class="toolbar">
        		<h1>Categories</h1>
        		<a href="#" class="back">Back</a>
    		</div>
    	<div id="target-wrapper-categories" class="s-scrollwrapper"><div id="target-pane-categories" class="s-scrollpane">
			<ul class="rounded" id="all_categories">
			</ul>
      </div></div>
		</div>
		
		<div id="category">
			<div class="toolbar">
				<h1></h1>
				<a href="#categories" class="back">Back</a>
			</div>
			<div class="loader" style="display:none;"></div>
			<div id="target-wrapper-results" class="s-scrollwrapper"><div id="target-pane-results" class="s-scrollpane">
			<ul class="rounded" id="results">
			</ul>
			</div></div>
		</div>
		
		<div id="top_download">
			<div class="toolbar">
				<h1>Top Download</h1>
				<a href="#" class="back">Back</a>
			</div>
			<div class="loader" style="display:none;"></div>
			<div id="target-wrapper-results" class="s-scrollwrapper"><div id="target-pane-results" class="s-scrollpane">
			<ul class="rounded" id="results">
			</ul>
			</div></div>
		</div>
		</div>
    </body>
</html>